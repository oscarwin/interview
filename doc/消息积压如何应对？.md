# 消息积压如何应对？

消息积压的原因要么是生产者生产的太快，要么是消费者消费的太慢。

对于线上环境如果出现消息积压可以通过水平扩展消费者的方式来解决。水平扩展消费时，也要相应的扩展分区的数量，因为一个分区只能同时服务于一个 consumer。然后再排查消息积压的原因：

1 检查生产者的生产数量是否增加

2 检查生产者的生产速度是否增加

3 检查消费者的消费速度是否变慢，排查变慢的原因，比如是否出现死锁，是否有资源等待等

4 检查消息的有效性，检查是否有大量的错误消费，导致不断重发引起