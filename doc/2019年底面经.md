# 2019年底面经

## Shopee

### 一面

- mysql 有那些存储引擎，有哪些区别
- mysql 索引在什么情况下会失效
- innodb 与myisam 的区别？
- mysql 的索引模型
- mysql 主从同步怎么搞的？分哪几个过程？如果有一台新机器要加到从机里，怎么个过程。
- 乐观锁与悲观锁的区别？
- binlog 日志是 master 推的还是 salve 来拉的？
- redis 持久化有哪几种方式，怎么选？
- redis 主从同步是怎样的过程？
- redis 的 zset 怎么实现的？
- redis key 的过期策略
- hashmap 是怎样实现的？
- tcp 的握手与挥手
- select 和 epoll的区别
- http与https的区别，加密怎么加的？
- raft算法和zk选主算法
- Kafka 选主怎么做的？
- kafka 与 rabbitmq区别
- kafka 分区怎么同步的
- kafka 怎么保证不丢消息的
- kafka 为什么可以扛住这么高的qps
- http各种返回码，401和406啥区别？
- redis 哨兵和集群
- kafka partition broker consumer consumer group topic 等都是啥关系？
- 两个单向链表，返回求和后的链表结构，例如2->3->1->5，和3->6，结果返回2->3->5->1

## 腾讯

腾讯面试提前1天和提前一个小时都会发短信提示，这个还是很赞的。去的腾讯滨海大厦面试，大楼的现代化程度很高，不过需要提醒一下的是，腾讯的滨海大厦分为南塔和北塔。我去的时候就上错楼了，需要下到4楼重新换成电梯。

### 一面

**笔试**

- 微服务的特点，如何实现服务发现和负载均衡
- c++内存管理
- time_wait在哪一端产生，作用是什么
- 程序crash如何定位
- 服务性能问题如何定位
- 两个排序数组找中位数
- 就数字n的平方根
- 设计一个算法，抽奖次数越多中奖概率就越高
- MySQL 如何分析一条语句的执行过程。`delete from t1 limit 3` 和 `delete from t1` 的区别？

**面试**

- 问项目
- 跳台阶
- 数组中奇数个元素
- 一栋楼有n层，不知道鸡蛋从第几层扔下去会碎，用最少的次数找出刚好会碎的楼层
- 动态规划与贪心有什么区别
- redis数据结构的底层实现
- redis如何实现高可用
- 负载均衡算法有哪些
- 服务发现是怎么实现的
- 熔断是怎么实现的
- id生成器怎么实现的，如何实现全局递增
- 协程和线程的区别
- 进程间通讯方法
- 平时逛哪些论坛，研究哪些算法
- paxos算法，这个算法我说不清楚，然后说了raft算法
- gdb怎么切换线程
- 如何判断一个图是否有环
- 介绍一下缓存
- 查看 CPU 的命令和磁盘 IO 的命令

### 二面

- 项目的系统架构画一下
- 如果用户量上涨怎么优化
- 负载均衡的加权轮询算法怎么实现
- 背包问题
- 贝叶斯的概率学原理
- 分词算法
- 连续整数求和(leetcode 第 829 题)，要求时间复杂度小于O(N)

### 总结

腾讯二面后就凉了，动态规划让写出递归公式，因为一直都是用动态规划表的思路来解题，所以这个地方没有答好。后面又问贝叶斯和分词算法，一点都不会。最后一道算法题没有写出来。这道题是leetcode hard级别的难度，所以没有刷。不过后面去看可能也没有那么难，只是这种通过数学公式的特点来解题往往容易被忽略了。总之，腾讯的一面算是中规中矩，二面确实让我有点手足无措。之前看网上的说法是腾讯算法题考的比较少，可能还是要分部门吧，我这次面试的是腾讯视频，二面基本上全是考算法。

## 字节跳动

### 一面

- 问项目
- 任务系统怎么保证任务完成后发奖一定成功
- zset 延时队列怎么实现的
- redis 数据结构有哪些？分别怎么实现的？
- redis 的持久化
- mysql 的索引
- 一个无序数组找其子序列构成的和最大，要求子序列中的元素在原数组中两两都不相邻

### 二面

- Redis 的 ZSET 怎么实现的？
尽量介绍的全一点，跳跃表加哈希表以及压缩链表
- Redis 的 ZSET 做排行榜时，如果要实现分数相同时按时间顺序排序怎么实现？
说了一个将 score 拆成高 32 位和低 32 位，高 32 位存分数，低 32 位存时间的方法。问还有没有其他方法，想不出了
- MySQL 事务的四个隔离级别？
先说了四个级别的区别，然后说了每个级别可能产生的问题
- binlog 日志和 redolog 日志清楚吗？
说了两个日志的作用以及两阶段提交
- C++ 的动态多态怎么实现的？
- C++ 的构造函数可以是虚函数吗？
- 缺失的第一个正数（leetcode第41题）
- linux 系统里，一个被打开的文件可以被另一个进程删除吗？
- 一个 10M 大小的 buffer 里存满了数据，现在要把这个 buffer 里的数据尽量发出去，可以允许部分丢包，问是用TCP好还是UDP好？为什么？
- 一个完整的 HTTP 请求会涉及到哪些协议？

### 三面

- 问项目
- redis 的 ZSET 是怎么实现的？
- 让你设计一个限流的系统怎么做？
令牌桶
- 让你设计一个延时任务系统怎么做
说了两个方案，一个是使用 redis 的 ZSET 来实现，考虑分片来抗高并发，使用 redis 的持久化来实现落地，使用 redis 的哨兵实现故障转移。
一个是使用时间轮的方法。
- 现有一个随机数生成器可以生成0到4的数，现在要让你用这个随机数生成器生成0到6的随机数，要保证生成的数概率均匀。
- 有 N 枚棋子，每个人一次可以拿1到 M 个，谁拿完后棋子的数量为0谁就获胜。现在有1000颗棋子，每次最多拿8个，A 先拿，那么 A 有必胜的拿法吗？第一个人拿完后剩余棋子的数量是8的倍数就必胜，否则就必输。
- 给出一棵二叉树的根节点，现在有这个二叉树的部分节点，要求这些节点最近的公共祖先。

### 四面

HR 面

### 总结

头条4轮面试都是视频面的，视频面试体验其实还是挺好的，坐在家里面试我会更加放松一些，这样脑子也灵活一些。人一紧张脑子就转不动了。头条的3轮技术面都问了zset的实现，ZSET的实现可以好好看看源码怎么实现，这样说的时候有更多东西可以说，不是说一个跳跃表就完事了。还有一点就是遇到不会的逻辑题或者算法题不要放弃，问问面试官可不可以提示一下。如果能在面试官的慢慢提示下能完成这道题，也是会被认可的。